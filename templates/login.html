{% extends "base.html" %}

{% block content %}
<h2>Login</h2>

<form id="login-form">
    <input type="email" name="email" placeholder="Email" class="form-control mb-2">
    <input type="password" name="password" placeholder="Password" class="form-control mb-2">
    <button class="btn btn-success">Login</button>
</form>

<script>
    document.getElementById("login-form").addEventListener("submit", async function (e) {
        e.preventDefault();

        const formData = new FormData(this);

        const res = await fetch("/api/auth/login/", {
            method: "POST",
            body: formData
        });

        const data = await res.json();

        localStorage.setItem("access", data.access);

        window.location.href = "/";
    });
</script>

{% endblock %}